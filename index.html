<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯›å­©é£²é£Ÿç®¡å®¶ğŸ¾</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Quicksand:wght@500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #FF9A9E;
            --secondary: #FECFEF;
            --accent: #a1c4fd;
            --text: #5D5D5D;
            --bg: #FFF0F3;
        }

        body {
            font-family: 'Quicksand', 'Noto Sans TC', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow-x: hidden;
        }

        .container {
            background: white;
            padding: 2rem;
            border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            max-width: 500px;
            width: 100%;
            border: 6px solid white;
            position: relative;
        }

        h1 {
            text-align: center;
            color: var(--primary);
            margin: 0 0 0.5rem 0;
            font-size: 1.8rem;
        }
        
        /* --- ç¹ªåœ–é¡¯ç¤ºå€ --- */
        .pet-display-area {
            width: 180px;
            height: 180px;
            margin: 10px auto 20px auto;
            background: var(--secondary);
            border-radius: 50%;
            border: 5px solid white;
            box-shadow: inset 0 0 20px rgba(0,0,0,0.05), 0 10px 20px rgba(0,0,0,0.1);
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
            position: relative;
            transition: 0.3s;
        }

        .pet-display-area:hover {
            transform: scale(1.05);
        }

        /* SVG Styles */
        svg.pet-svg {
            width: 140px;
            height: 140px;
            transition: 0.3s;
            filter: drop-shadow(2px 4px 0px rgba(0,0,0,0.1));
        }

        /* --- è¡¨å–®èˆ‡æŒ‰éˆ• --- */
        .pet-toggle {
            display: flex;
            background: #f0f0f0;
            border-radius: 50px;
            padding: 5px;
            margin-bottom: 20px;
        }

        .pet-toggle label {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            font-weight: bold;
            color: #aaa;
            border-radius: 50px;
            z-index: 2;
            transition: 0.3s;
        }
        
        .pet-toggle input { display: none; }
        .pet-toggle input:checked + label { color: white; background: var(--primary); box-shadow: 0 4px 10px rgba(255,154,158,0.4); }

        .section-title {
            font-size: 0.9rem;
            color: var(--primary);
            font-weight: bold;
            margin-top: 12px;
            margin-bottom: 5px;
        }

        select, input {
            width: 100%;
            padding: 12px;
            margin-bottom: 8px;
            border: 2px solid #eee;
            border-radius: 15px;
            font-size: 1rem;
            outline: none;
            box-sizing: border-box;
        }

        select:focus, input:focus { border-color: var(--primary); }

        button.calc-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 15px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            margin-top: 1.5rem;
            box-shadow: 0 5px 15px rgba(255, 154, 158, 0.4);
            transition: transform 0.2s;
        }
        
        button.calc-btn:active { transform: scale(0.95); }

        /* --- çµæœå€èˆ‡å‹•ç•« --- */
        #result-card {
            background: #fff;
            border: 3px dashed var(--secondary);
            padding: 20px;
            border-radius: 25px;
            margin-top: 25px;
            display: none;
            animation: popIn 0.5s ease;
        }

        .meal-plan {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            text-align: center;
        }
        .plan-item { flex: 1; background: #f9f9f9; padding: 10px; border-radius: 10px; }

        /* èµ°è·¯å‹•ç•«è»Œé“ */
        .runway {
            margin-top: 20px;
            height: 80px;
            border-bottom: 2px solid #eee;
            position: relative;
            overflow: hidden;
        }

        .walker {
            width: 60px;
            height: 60px;
            position: absolute;
            bottom: 0;
            left: -70px;
            animation: walk 5s linear infinite, bounce 0.3s ease-in-out infinite alternate;
        }

        .walker svg {
            width: 100%;
            height: 100%;
        }

        @keyframes walk {
            0% { left: -20%; }
            100% { left: 120%; }
        }
        @keyframes bounce {
            from { transform: translateY(0); }
            to { transform: translateY(-8px); }
        }
        @keyframes popIn {
            from { opacity: 0; transform: scale(0.9); }
            to { opacity: 1; transform: scale(1); }
        }
    </style>
</head>
<body>

    <div class="container">
        <h1>ğŸ¨ æ¯›å­©ç•«å®¶è¨ˆç®—æ©Ÿ</h1>

        <!-- ç¹ªåœ–é¡¯ç¤ºå€ -->
        <div class="pet-display-area" id="displayArea">
            <!-- SVG å°‡æœƒè¢«æ³¨å…¥é€™è£¡ -->
            <div style="font-size:3rem; opacity:0.3;">ğŸ¾</div>
        </div>

        <div class="pet-toggle">
            <input type="radio" id="dog" name="petType" value="dog" checked onchange="initData()">
            <label for="dog">ğŸ¶ ç‹—ç‹—</label>
            <input type="radio" id="cat" name="petType" value="cat" onchange="initData()">
            <label for="cat">ğŸ± è²“å’ª</label>
        </div>

        <!-- è¼¸å…¥å€ -->
        <div>
            <div class="section-title">ğŸ¨ å“ç¨® (æœƒè®Šèº«å–”!)</div>
            <select id="breedSelect" onchange="updateBreed()"></select>

            <div class="section-title">âš–ï¸ é«”é‡ (kg)</div>
            <input type="number" id="weight" step="0.1">

            <div class="section-title">ğŸƒ ç”Ÿæ´»å‹æ…‹</div>
            <select id="condition"></select>

            <div class="section-title">ğŸ¥« é£¼æ–™å“ç‰Œ</div>
            <select id="foodBrand" onchange="updateCalories()"></select>

            <div class="section-title">ğŸ”¥ ç†±é‡ (kcal/kg)</div>
            <input type="number" id="calories">
        </div>

        <button class="calc-btn" onclick="calculate()">è¨ˆç®— + ç”Ÿæˆå‹•ç•« ğŸ¬</button>

        <!-- çµæœå€ -->
        <div id="result-card">
            <div style="text-align:center">
                <span style="font-size:0.9rem; color:#999">å»ºè­°æ¯æ—¥ç¸½é‡</span><br>
                <span style="font-size:2.5rem; font-weight:800; color:var(--primary)" id="totalAmount">0</span> g
            </div>

            <div class="meal-plan">
                <div class="plan-item">
                    <div style="font-size:0.8rem; color:#aaa">å…©é¤åˆ¶</div>
                    <strong id="meal2">0</strong> g
                </div>
                <div class="plan-item">
                    <div style="font-size:0.8rem; color:#aaa">ä¸‰é¤åˆ¶</div>
                    <strong id="meal3">0</strong> g
                </div>
            </div>

            <!-- èµ°è·¯å‹•ç•« -->
            <div class="runway">
                <div class="walker" id="walker"></div>
            </div>

            <div style="margin-top:15px; font-size:0.85rem; color:#777; background:#f4f4f4; padding:10px; border-radius:10px;">
                ğŸ’¡ <span id="adviceText"></span>
            </div>
        </div>
    </div>

    <script>
        // --- SVG ç¹ªåœ–å¼•æ“ (ç›´æ¥ç”¨ä»£ç¢¼ç•«åœ–) ---
        const svgs = {
            // ç‹—ç‹—åŸºåº•ï¼šåœ“è§’æ–¹å½¢è‡‰
            shiba: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M20,30 L30,5 L45,20 L55,20 L70,5 L80,30" fill="#D2691E"/> <!-- Ears -->
                <rect x="20" y="25" width="60" height="55" rx="15" fill="#D2691E"/> <!-- Head -->
                <path d="M25,45 Q50,85 75,45 L75,70 Q50,90 25,70 Z" fill="#FFF8DC"/> <!-- Cheeks -->
                <circle cx="35" cy="45" r="4" fill="#333"/> <circle cx="65" cy="45" r="4" fill="#333"/> <!-- Eyes -->
                <circle cx="28" cy="40" r="3" fill="white" opacity="0.5"/> <!-- Shine -->
                <ellipse cx="50" cy="55" rx="6" ry="4" fill="#333"/> <!-- Nose -->
            </svg>`,
            corgi: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M15,20 L10,0 L35,20 Z" fill="#D2691E"/> <path d="M85,20 L90,0 L65,20 Z" fill="#D2691E"/> <!-- Big Ears -->
                <rect x="20" y="20" width="60" height="55" rx="12" fill="#D2691E"/>
                <rect x="46" y="20" width="8" height="30" fill="white"/> <!-- Blaze -->
                <path d="M20,50 Q50,90 80,50 V70 Q50,95 20,70 Z" fill="white"/>
                <circle cx="35" cy="45" r="4" fill="#333"/> <circle cx="65" cy="45" r="4" fill="#333"/>
                <ellipse cx="50" cy="58" rx="5" ry="3" fill="#333"/>
            </svg>`,
            husky: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M20,25 L25,5 L40,20 Z" fill="#889"/> <path d="M80,25 L75,5 L60,20 Z" fill="#889"/>
                <rect x="20" y="20" width="60" height="55" rx="15" fill="#889"/>
                <path d="M20,35 Q35,60 50,35 Q65,60 80,35 V75 Q50,95 20,75 Z" fill="white"/> <!-- Mask -->
                <path d="M30,38 L45,42" stroke="#333" stroke-width="2"/> <path d="M70,38 L55,42" stroke="#333" stroke-width="2"/> <!-- Angry Brows -->
                <circle cx="38" cy="48" r="4" fill="#6495ED"/> <circle cx="62" cy="48" r="4" fill="#6495ED"/> <!-- Blue Eyes -->
                <ellipse cx="50" cy="58" rx="5" ry="3" fill="#333"/>
            </svg>`,
            poodle: `<svg class="pet-svg" viewBox="0 0 100 100">
                <circle cx="30" cy="35" r="15" fill="#C19A6B"/> <circle cx="70" cy="35" r="15" fill="#C19A6B"/> <!-- Ears -->
                <circle cx="50" cy="20" r="15" fill="#C19A6B"/> <!-- Topknot -->
                <rect x="25" y="25" width="50" height="50" rx="20" fill="#C19A6B"/>
                <circle cx="40" cy="45" r="3" fill="#333"/> <circle cx="60" cy="45" r="3" fill="#333"/>
                <ellipse cx="50" cy="52" rx="4" ry="3" fill="#333"/>
            </svg>`,
            golden: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M10,40 Q5,60 20,50" stroke="#DAA520" stroke-width="10" fill="none"/> <!-- Floppy Ears L -->
                <path d="M90,40 Q95,60 80,50" stroke="#DAA520" stroke-width="10" fill="none"/> <!-- Floppy Ears R -->
                <rect x="22" y="22" width="56" height="56" rx="18" fill="#F4C430"/>
                <circle cx="38" cy="45" r="4" fill="#5A3A29"/> <circle cx="62" cy="45" r="4" fill="#5A3A29"/>
                <path d="M50,60 Q60,70 50,75 Q40,70 50,60" fill="#333"/> <!-- Nose -->
                <path d="M50,75 Q60,80 50,85 Q40,80 50,75" fill="#FF9A9E"/> <!-- Tongue -->
            </svg>`,
            mix_dog: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M15,30 L20,10 L35,30 Z" fill="#333"/> <path d="M85,30 L80,10 L65,30 Z" fill="#333"/>
                <rect x="20" y="25" width="60" height="55" rx="15" fill="#333"/>
                <rect x="45" y="25" width="10" height="55" fill="white"/>
                <circle cx="35" cy="45" r="4" fill="white"/> <circle cx="35" cy="45" r="2" fill="black"/>
                <circle cx="65" cy="45" r="4" fill="white"/> <circle cx="65" cy="45" r="2" fill="black"/>
                <ellipse cx="50" cy="60" rx="6" ry="4" fill="pink"/>
            </svg>`,
            
            // è²“å’ªåŸºåº•ï¼šåœ“è‡‰+å°–è€³
            orange: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M20,30 L25,5 L45,25 Z" fill="#FFA500"/> <path d="M80,30 L75,5 L55,25 Z" fill="#FFA500"/> <!-- Ears -->
                <circle cx="50" cy="50" r="35" fill="#FFA500"/>
                <path d="M40,20 L50,30 L60,20" fill="none" stroke="#D2691E" stroke-width="3"/> <!-- Stripes -->
                <path d="M20,50 H5" stroke="#333" stroke-width="1"/> <path d="M80,50 H95" stroke="#333" stroke-width="1"/> <!-- Whiskers -->
                <circle cx="38" cy="45" r="4" fill="#333"/> <circle cx="62" cy="45" r="4" fill="#333"/>
                <path d="M45,55 L50,60 L55,55" stroke="#333" fill="none"/> <!-- Mouth -->
            </svg>`,
            tuxedo: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M20,30 L25,5 L45,25 Z" fill="#333"/> <path d="M80,30 L75,5 L55,25 Z" fill="#333"/>
                <circle cx="50" cy="50" r="35" fill="#333"/>
                <path d="M50,50 L30,85 H70 Z" fill="white"/> <!-- Tuxedo Chest (Abstract) -->
                <path d="M50,50 L40,80 H60 Z" fill="white" transform="rotate(180 50 50)"/> <!-- Face mask -->
                <circle cx="38" cy="45" r="4" fill="#FFD700"/> <circle cx="62" cy="45" r="4" fill="#FFD700"/> <!-- Yellow Eyes -->
                <circle cx="50" cy="55" r="2" fill="pink"/>
            </svg>`,
            siamese: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M20,30 L25,5 L45,25 Z" fill="#443322"/> <path d="M80,30 L75,5 L55,25 Z" fill="#443322"/>
                <circle cx="50" cy="50" r="35" fill="#F5DEB3"/>
                <circle cx="50" cy="50" r="20" fill="#554433" opacity="0.8"/> <!-- Dark Face -->
                <circle cx="38" cy="45" r="4" fill="#87CEEB"/> <circle cx="62" cy="45" r="4" fill="#87CEEB"/> <!-- Blue Eyes -->
                <circle cx="50" cy="55" r="2" fill="#333"/>
            </svg>`,
            calico: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M20,30 L25,5 L45,25 Z" fill="#333"/> <path d="M80,30 L75,5 L55,25 Z" fill="#FFA500"/>
                <circle cx="50" cy="50" r="35" fill="white"/>
                <circle cx="30" cy="35" r="10" fill="#333"/> <circle cx="70" cy="40" r="12" fill="#FFA500"/> <!-- Spots -->
                <circle cx="38" cy="48" r="4" fill="#333"/> <circle cx="62" cy="48" r="4" fill="#333"/>
                <path d="M45,58 L50,63 L55,58" stroke="#333" fill="none"/>
            </svg>`,
            grey: `<svg class="pet-svg" viewBox="0 0 100 100">
                <path d="M20,30 L25,5 L45,25 Z" fill="#778899"/> <path d="M80,30 L75,5 L55,25 Z" fill="#778899"/>
                <circle cx="50" cy="50" r="35" fill="#778899"/>
                <circle cx="38" cy="45" r="5" fill="#CCFF00"/> <circle cx="38" cy="45" r="2" fill="#333"/> <!-- Green Eyes -->
                <circle cx="62" cy="45" r="5" fill="#CCFF00"/> <circle cx="62" cy="45" r="2" fill="#333"/>
                <path d="M15,50 H30" stroke="#ddd"/> <path d="M70,50 H85" stroke="#ddd"/>
            </svg>`,
            default_cat: `<svg class="pet-svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="35" fill="#ddd"/><text x="35" y="55" font-size="30">ğŸ±</text></svg>`,
            default_dog: `<svg class="pet-svg" viewBox="0 0 100 100"><rect x="25" y="25" width="50" height="50" rx="10" fill="#ddd"/><text x="35" y="60" font-size="30">ğŸ¶</text></svg>`
        };

        // --- è³‡æ–™åº« ---
        const data = {
            dog: {
                breeds: [
                    { name: "æŸ´çŠ¬", weight: 10, svg: "shiba" },
                    { name: "æŸ¯åŸº", weight: 12, svg: "corgi" },
                    { name: "å“ˆå£«å¥‡", weight: 23, svg: "husky" },
                    { name: "è²´è³“/æ¯”ç†Š", weight: 5, svg: "poodle" },
                    { name: "é»ƒé‡‘çµçŠ¬", weight: 30, svg: "golden" },
                    { name: "ç±³å…‹æ–¯ (é»‘)", weight: 15, svg: "mix_dog" },
                    { name: "è‡˜è…¸çŠ¬", weight: 5, svg: "golden" }, // å€Ÿç”¨å‚è€³ç‰¹å¾µ
                    { name: "æ³•é¬¥/å·´å“¥", weight: 11, svg: "mix_dog" }
                ],
                conditions: [
                    { val: 1.6, text: "æˆçŠ¬ (å·²çµç´®)" },
                    { val: 1.8, text: "æˆçŠ¬ (æœªçµç´®)" },
                    { val: 3.0, text: "å¹¼çŠ¬ (å°å¯¶å¯¶)" },
                    { val: 1.0, text: "æ¸›è‚¥ä¸­" }
                ],
                foods: [
                    { name: "Royal Canin çš‡å®¶", kcal: 3960 },
                    { name: "Orijen æ¸´æœ›", kcal: 3960 },
                    { name: "Real Power ç‘å¨", kcal: 4050 },
                    { name: "Hill's å¸Œçˆ¾æ€", kcal: 3650 },
                    { name: "ZiwiPeak å·”å³°", kcal: 5600 }
                ]
            },
            cat: {
                breeds: [
                    { name: "æ©˜è²“ (æ˜“èƒ–é«”è³ª)", weight: 5.5, svg: "orange" },
                    { name: "è³“å£«è²“", weight: 4.5, svg: "tuxedo" },
                    { name: "æš¹ç¾…è²“", weight: 3.5, svg: "siamese" },
                    { name: "ä¸‰èŠ±è²“", weight: 4, svg: "calico" },
                    { name: "è‹±çŸ­/è—è²“", weight: 5, svg: "grey" },
                    { name: "ç±³å…‹æ–¯ (ç™½åº•)", weight: 4.5, svg: "calico" } // å€Ÿç”¨
                ],
                conditions: [
                    { val: 1.2, text: "æˆè²“ (å®¤å…§)" },
                    { val: 1.4, text: "æˆè²“ (æ´»æ½‘)" },
                    { val: 2.5, text: "å¹¼è²“" },
                    { val: 0.8, text: "èƒ–èƒ–è²“ (æ¸›è‚¥)" }
                ],
                foods: [
                    { name: "Royal Canin çš‡å®¶", kcal: 3750 },
                    { name: "Orijen æ¸´æœ›", kcal: 4060 },
                    { name: "Real Power ç‘å¨", kcal: 4150 },
                    { name: "Wellness CORE", kcal: 3977 },
                    { name: "æ€ªç¸éƒ¨è½", kcal: 4100 }
                ]
            }
        };

        const adviceList = {
            dog: ["æ•£æ­¥è«‹é¿é–‹æ­£ä¸­åˆå–”ï¼", "ä¸èƒ½åƒå·§å…‹åŠ›èˆ‡è‘¡è„ï¼", "å®šæœŸè¦é»é™¤è·³èš¤è—¥å–”ã€‚"],
            cat: ["å¤šå–æ°´é é˜²è…è‡Ÿç—…ï¼", "ç™¾åˆèŠ±å°è²“æœ‰åŠ‡æ¯’ï¼", "ç´™ç®±æ˜¯è²“å’ªæœ€å¥½çš„æœ‹å‹ã€‚"]
        };

        // --- é‚è¼¯æ§åˆ¶ ---
        function initData() {
            const type = document.querySelector('input[name="petType"]:checked').value;
            const d = data[type];
            const root = document.documentElement;

            // é¡è‰²åˆ‡æ›
            if(type === 'cat'){
                root.style.setProperty('--primary', '#74b9ff');
                root.style.setProperty('--secondary', '#dfe6e9');
                root.style.setProperty('--bg', '#f0f7ff');
            } else {
                root.style.setProperty('--primary', '#FF9A9E');
                root.style.setProperty('--secondary', '#FECFEF');
                root.style.setProperty('--bg', '#FFF0F3');
            }

            // å¡«å…¥é¸å–®
            const bs = document.getElementById('breedSelect');
            bs.innerHTML = '<option value="">-- è«‹é¸æ“‡ --</option>';
            d.breeds.forEach((b, i) => {
                bs.innerHTML += `<option value="${i}">${b.name}</option>`;
            });

            const cs = document.getElementById('condition');
            cs.innerHTML = '';
            d.conditions.forEach(c => {
                cs.innerHTML += `<option value="${c.val}">${c.text}</option>`;
            });

            const fs = document.getElementById('foodBrand');
            fs.innerHTML = '<option value="0">-- å“ç‰Œ --</option>';
            d.foods.forEach(f => {
                fs.innerHTML += `<option value="${f.kcal}">${f.name}</option>`;
            });

            // é‡ç½®åœ–æ¡ˆ
            document.getElementById('displayArea').innerHTML = type === 'dog' ? svgs.default_dog : svgs.default_cat;
            document.getElementById('result-card').style.display = 'none';
        }

        function updateBreed() {
            const type = document.querySelector('input[name="petType"]:checked').value;
            const idx = document.getElementById('breedSelect').value;
            if(idx !== "") {
                const b = data[type].breeds[idx];
                document.getElementById('weight').value = b.weight;
                // æ³¨å…¥ SVG
                document.getElementById('displayArea').innerHTML = svgs[b.svg] || (type==='dog'?svgs.default_dog:svgs.default_cat);
            }
        }

        function updateCalories() {
            const v = document.getElementById('foodBrand').value;
            if(v != "0") document.getElementById('calories').value = v;
        }

        function calculate() {
            const w = parseFloat(document.getElementById('weight').value);
            const f = parseFloat(document.getElementById('condition').value);
            const k = parseFloat(document.getElementById('calories').value);
            const type = document.querySelector('input[name="petType"]:checked').value;

            if(!w || !k) { alert("è«‹å¡«å¯«å®Œæ•´è³‡æ–™å–”ï¼"); return; }

            const rer = 70 * Math.pow(w, 0.75);
            const der = rer * f;
            const total = (der / k) * 1000;

            document.getElementById('result-card').style.display = 'block';
            document.getElementById('totalAmount').innerText = Math.round(total);
            document.getElementById('meal2').innerText = Math.round(total/2);
            document.getElementById('meal3').innerText = Math.round(total/3);

            // è¨­å®šå‹•ç•«ä¸»è§’
            const currentSVG = document.getElementById('displayArea').innerHTML;
            document.getElementById('walker').innerHTML = currentSVG;

            // éš¨æ©Ÿå»ºè­°
            const arr = adviceList[type];
            document.getElementById('adviceText').innerText = arr[Math.floor(Math.random()*arr.length)];
            
            window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        }

        initData();
    </script>
</body>
</html>
