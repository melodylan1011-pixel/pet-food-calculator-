<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¯›å­©å…¨æ–¹ä½é£²é£Ÿæ‰‹æœ­ (è±ªè¯è³‡æ–™ç‰ˆ) ğŸ¾</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&family=Quicksand:wght@600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #E08E79; /* é™¶åœŸç²‰ (ç‹—) */
            --primary-light: #FBEHE8;
            --accent: #F4C095;
            --bg: #FFF9F5;
            --text: #6B5B5B;
            --card-bg: #FFFFFF;
            --radius: 24px;
        }

        body.cat-mode {
            --primary: #8CACD3; /* è«è˜­è¿ªè— (è²“) */
            --primary-light: #EBF2FA;
            --accent: #AEC2E0;
            --bg: #F0F6FF;
        }

        body {
            font-family: 'Quicksand', 'Noto Sans TC', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: 0.5s ease;
            position: relative;
            overflow-x: hidden;
        }

        /* --- èƒŒæ™¯æ¼‚æµ®è‚‰çƒå‹•ç•« --- */
        .bg-particles {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            pointer-events: none;
            z-index: 0;
            overflow: hidden;
        }
        .paw-bg {
            position: absolute;
            font-size: 2rem;
            opacity: 0.08;
            color: var(--primary);
            animation: floatUp 15s linear infinite;
        }
        .paw-bg:nth-child(1) { left: 10%; top: 100%; animation-duration: 12s; font-size: 3rem; }
        .paw-bg:nth-child(2) { left: 85%; top: 100%; animation-duration: 18s; animation-delay: 2s; }
        .paw-bg:nth-child(3) { left: 30%; top: 100%; animation-duration: 15s; animation-delay: 5s; font-size: 1.5rem; }
        .paw-bg:nth-child(4) { left: 60%; top: 100%; animation-duration: 20s; animation-delay: 1s; }

        @keyframes floatUp {
            0% { transform: translateY(0) rotate(0deg); opacity: 0; }
            20% { opacity: 0.1; }
            80% { opacity: 0.1; }
            100% { transform: translateY(-120vh) rotate(360deg); opacity: 0; }
        }

        .container {
            background: var(--card-bg);
            padding: 2.5rem;
            border-radius: var(--radius);
            box-shadow: 0 20px 40px rgba(0,0,0,0.05);
            max-width: 500px;
            width: 100%;
            border: 2px solid white;
            position: relative;
            z-index: 10;
            transition: 0.3s;
        }

        h1 {
            text-align: center;
            color: var(--primary);
            margin: 0 0 5px 0;
            font-size: 1.8rem;
            letter-spacing: 1.5px;
        }
        .subtitle {
            text-align: center;
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 25px;
            font-weight: 500;
        }

        /* --- åˆ‡æ›æŒ‰éˆ• --- */
        .toggle-wrapper {
            display: flex;
            background: #F7F7F7;
            border-radius: 50px;
            padding: 6px;
            margin-bottom: 25px;
            position: relative;
            cursor: pointer;
            box-shadow: inset 0 2px 5px rgba(0,0,0,0.03);
        }

        .toggle-bg {
            position: absolute;
            left: 6px; top: 6px;
            width: calc(50% - 6px); height: calc(100% - 12px);
            background: var(--primary);
            border-radius: 40px;
            transition: 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            z-index: 1;
        }
        body.cat-mode .toggle-bg { left: 50%; }

        .toggle-item {
            flex: 1; text-align: center; padding: 12px;
            font-weight: bold; z-index: 2; color: #BBB; transition: 0.3s;
            user-select: none; font-size: 1rem;
        }
        .toggle-item.active { color: white; }

        /* --- è¡¨å–® --- */
        .input-row { margin-bottom: 15px; }
        label {
            font-size: 0.9rem; color: var(--text); font-weight: bold;
            margin-bottom: 8px; display: flex; align-items: center; gap: 5px;
        }
        .label-icon { color: var(--primary); }

        select, input {
            width: 100%; padding: 14px 16px;
            border: 2px solid #F0F0F0; border-radius: 18px;
            font-size: 1rem; background: #FAFAFA;
            outline: none; transition: 0.3s; color: var(--text);
            box-sizing: border-box; font-family: inherit;
        }
        select:focus, input:focus {
            border-color: var(--primary); background: #fff;
            box-shadow: 0 0 0 4px var(--primary-light);
        }

        button.calc-btn {
            width: 100%; padding: 18px;
            background: var(--primary); color: white;
            border: none; border-radius: 50px;
            font-size: 1.2rem; font-weight: bold; letter-spacing: 1px;
            cursor: pointer; margin-top: 20px;
            box-shadow: 0 10px 25px -5px var(--primary);
            transition: 0.2s; position: relative; overflow: hidden;
        }
        button.calc-btn:hover { transform: translateY(-3px); }
        button.calc-btn:active { transform: scale(0.98); }

        /* --- çµæœå€ --- */
        #result-area {
            margin-top: 35px; border-top: 2px dashed #eee; padding-top: 25px;
            display: none; animation: slideUp 0.6s cubic-bezier(0.16, 1, 0.3, 1);
        }

        .main-result { text-align: center; padding-bottom: 20px; }
        
        .big-number {
            font-size: 3.5rem; font-weight: 800; color: var(--primary);
            line-height: 1; display: block; margin: 10px 0;
            text-shadow: 2px 2px 0px var(--primary-light);
        }

        /* è³‡è¨Šæ ¼ */
        .info-grid {
            display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px;
        }
        .info-card {
            background: #F8F9FA; padding: 12px; border-radius: 16px;
            text-align: center; border: 1px solid #eee;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
        }
        .info-card.highlight { background: var(--primary-light); border-color: var(--primary-light); }
        
        .info-label { font-size: 0.8rem; color: #999; margin-bottom: 5px; }
        .info-val { font-weight: bold; font-size: 1.1rem; color: #555; }

        /* å»ºè­°å¡ç‰‡ */
        .advice-box {
            background: #FFF; padding: 15px 20px; border-radius: 16px;
            border-left: 5px solid var(--primary); color: #666;
            font-size: 0.9rem; line-height: 1.6;
            box-shadow: 0 5px 15px rgba(0,0,0,0.03); margin-bottom: 20px;
        }

        /* è¤‡è£½æŒ‰éˆ• */
        .copy-btn {
            display: block; margin: 0 auto 20px auto;
            background: transparent; border: 2px solid #eee;
            color: #aaa; padding: 8px 20px; border-radius: 30px;
            cursor: pointer; font-size: 0.85rem; transition: 0.3s;
        }
        .copy-btn:hover { border-color: var(--primary); color: var(--primary); }

        /* --- å‹•ç•«èˆå° --- */
        .stage {
            height: 140px; position: relative;
            overflow: hidden; border-bottom: 4px solid #eee;
            border-radius: 0 0 20px 20px;
        }

        .pet-actor {
            width: 90px; height: 90px;
            position: absolute; bottom: 0; left: -150px;
            animation: walkJumpLoop 6s linear infinite;
        }

        .heart-pop {
            position: absolute; top: -30px; left: 50%; transform: translateX(-50%);
            font-size: 20px; color: #FF6B6B; opacity: 0;
            animation: heartPop 6s linear infinite;
        }

        /* SVG Styles */
        .pet-svg { display: none; width: 100%; height: 100%; overflow: visible; }
        .pet-svg.active { display: block; }
        .leg { transform-origin: 50% 10%; }
        .tail { transform-origin: 0% 50%; }
        
        /* Keyframes */
        @keyframes walkJumpLoop {
            0% { left: -120px; transform: scaleX(1); }
            40% { transform: scaleX(1) translateY(0); }
            45% { transform: scaleX(1) translateY(-15px) rotate(-5deg); } /* Jump */
            50% { left: 50%; transform: scaleX(1) translateY(-40px) rotate(5deg); } /* Peak */
            55% { transform: scaleX(1) translateY(0); } /* Land */
            100% { left: 120%; transform: scaleX(1); }
        }
        @keyframes heartPop {
            0%, 45% { opacity: 0; transform: translate(-50%, 0); }
            50% { opacity: 1; transform: translate(-50%, -20px) scale(1.5); }
            60% { opacity: 0; transform: translate(-50%, -40px); }
            100% { opacity: 0; }
        }
        @keyframes bounce { from { transform: translateY(0); } to { transform: translateY(-3px); } }
        @keyframes legSwing { from { transform: rotate(-25deg); } to { transform: rotate(25deg); } }
        @keyframes tailWag { from { transform: rotate(15deg); } to { transform: rotate(-15deg); } }
        @keyframes tailSway { 0% { transform: rotate(-20deg); } 50% { transform: rotate(10deg); } 100% { transform: rotate(-20deg); } }
        @keyframes slideUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .dog-svg .body { animation: bounce 0.5s infinite alternate; }
        .dog-svg .leg-l { animation: legSwing 0.5s infinite alternate; }
        .dog-svg .leg-r { animation: legSwing 0.5s infinite alternate-reverse; }
        .dog-svg .tail { animation: tailWag 0.2s infinite alternate; }
        
        .cat-svg .body { animation: bounce 0.7s infinite alternate; }
        .cat-svg .leg-l { animation: legSwing 0.7s infinite alternate; }
        .cat-svg .leg-r { animation: legSwing 0.7s infinite alternate-reverse; }
        .cat-svg .tail { animation: tailSway 2s infinite ease-in-out; }
    </style>
</head>
<body>

    <!-- èƒŒæ™¯å‹•ç•« -->
    <div class="bg-particles">
        <div class="paw-bg">ğŸ¾</div>
        <div class="paw-bg">ğŸ¾</div>
        <div class="paw-bg">ğŸ¾</div>
        <div class="paw-bg">ğŸ¾</div>
    </div>

    <div class="container">
        <h1>æ¯›å­©é£²é£Ÿæ‰‹æœ­ ğŸ¾</h1>
        <p class="subtitle">è±å¯Œè³‡æ–™åº«ï¼Œè¨ˆç®—æ›´ç²¾æº–</p>

        <!-- åˆ‡æ› -->
        <div class="toggle-wrapper" onclick="toggleMode()">
            <div class="toggle-bg"></div>
            <div class="toggle-item active" id="btn-dog">DOG ç‹—ç‹—</div>
            <div class="toggle-item" id="btn-cat">CAT è²“å’ª</div>
        </div>

        <!-- è¡¨å–® -->
        <div class="input-row">
            <label><span class="label-icon">ğŸ§¬</span> é¸æ“‡å“ç¨® (25+ç¨®ç†±é–€å“ç¨®)</label>
            <select id="breedSelect" onchange="updateBreed()">
                <option value="">-- è«‹é¸æ“‡å“ç¨® --</option>
            </select>
        </div>

        <div class="input-row">
            <label><span class="label-icon">âš–ï¸</span> é«”é‡ (kg)</label>
            <input type="number" id="weight" placeholder="è¼¸å…¥é«”é‡" step="0.1">
        </div>

        <div class="input-row">
            <label><span class="label-icon">ğŸƒ</span> ç”Ÿå‘½éšæ®µ / ç‹€æ…‹</label>
            <select id="condition"></select>
        </div>

        <div class="input-row">
            <label><span class="label-icon">ğŸ¥«</span> é£¼æ–™å“ç‰Œ (25+ç¨®å¸¸è¦‹å“ç‰Œ)</label>
            <select id="foodBrand" onchange="fillKcal()">
                <option value="0">-- å¿«é€Ÿé¸æ“‡ --</option>
            </select>
        </div>

        <div class="input-row">
            <label><span class="label-icon">ğŸ”¥</span> ç†±é‡ (kcal/kg)</label>
            <input type="number" id="calories" placeholder="ME ä»£è¬èƒ½">
        </div>

        <button class="calc-btn" onclick="calculate()">é–‹å§‹è¨ˆç®—å¥åº·é£Ÿé‡ âœ¨</button>

        <!-- çµæœ -->
        <div id="result-area">
            <div class="main-result">
                <span style="color:#aaa; font-size:0.85rem; letter-spacing:1px;">SUGGESTED DAILY AMOUNT</span>
                <span class="big-number" id="totalAmount">0</span>
                <span style="color:var(--primary); font-weight:bold;">å…¬å…‹ (grams) / å¤©</span>
            </div>

            <!-- è±å¯Œè³‡è¨Šç¶²æ ¼ -->
            <div class="info-grid">
                <div class="info-card">
                    <div class="info-label">å…©é¤åˆ¶</div>
                    <div class="info-val" id="meal2">0 g</div>
                </div>
                <div class="info-card">
                    <div class="info-label">ä¸‰é¤åˆ¶</div>
                    <div class="info-val" id="meal3">0 g</div>
                </div>
                <div class="info-card highlight">
                    <div class="info-label">ğŸ’§ æ¯æ—¥å–æ°´å»ºè­°</div>
                    <div class="info-val" id="waterNeed">0 ml</div>
                </div>
                <div class="info-card highlight">
                    <div class="info-label">ğŸ¦´ é›¶é£Ÿç†±é‡ä¸Šé™</div>
                    <div class="info-val" id="treatLimit">0 kcal</div>
                </div>
            </div>

            <div class="advice-box">
                <strong>ğŸ’¡ ç¸é†«å°å®åš€ï¼š</strong><br>
                <span id="adviceText"></span>
            </div>

            <button class="copy-btn" onclick="copyResult()">ğŸ“‹ è¤‡è£½è¨ˆç®—çµæœ</button>

            <!-- å‹•ç•«èˆå° -->
            <div class="stage">
                <div class="pet-actor">
                    <div class="heart-pop">â¤ï¸</div>
                    
                    <!-- ç‹—ç‹— SVG -->
                    <svg class="pet-svg dog-svg active" id="dog-svg" viewBox="0 0 100 100">
                        <g class="body-group">
                            <path class="tail" d="M15,45 Q5,35 15,25" stroke="#E08E79" stroke-width="6" fill="none" stroke-linecap="round" />
                            <rect class="leg leg-l" x="22" y="60" width="8" height="25" rx="4" fill="#C4725D" />
                            <rect class="leg leg-r" x="22" y="60" width="8" height="25" rx="4" fill="#E08E79" />
                            <rect class="leg leg-l" x="65" y="60" width="8" height="25" rx="4" fill="#C4725D" />
                            <rect class="leg leg-r" x="65" y="60" width="8" height="25" rx="4" fill="#E08E79" />
                            <rect class="body" x="15" y="35" width="65" height="35" rx="15" fill="#E08E79" />
                            <path d="M58,35 L68,55 L78,35 Z" fill="#FFF" />
                            <g class="head" transform="translate(0, 2)">
                                <rect x="60" y="15" width="35" height="35" rx="12" fill="#E08E79" />
                                <path d="M65,15 L60,5 L75,15 Z" fill="#C4725D" />
                                <path d="M85,15 L95,5 L90,15 Z" fill="#C4725D" />
                                <circle cx="72" cy="28" r="2.5" fill="#444" />
                                <circle cx="88" cy="28" r="2.5" fill="#444" />
                                <ellipse cx="80" cy="35" rx="4" ry="3" fill="#444" />
                            </g>
                        </g>
                    </svg>

                    <!-- è²“å’ª SVG -->
                    <svg class="pet-svg cat-svg" id="cat-svg" viewBox="0 0 100 100">
                        <g class="body-group">
                            <path class="tail" d="M10,40 Q-5,15 20,10" stroke="#8CACD3" stroke-width="5" fill="none" stroke-linecap="round" />
                            <rect class="leg leg-l" x="22" y="62" width="7" height="25" rx="3" fill="#5A78A6" />
                            <rect class="leg leg-r" x="22" y="62" width="7" height="25" rx="3" fill="#8CACD3" />
                            <rect class="leg leg-l" x="65" y="62" width="7" height="25" rx="3" fill="#5A78A6" />
                            <rect class="leg leg-r" x="65" y="62" width="7" height="25" rx="3" fill="#8CACD3" />
                            <rect class="body" x="15" y="40" width="65" height="30" rx="15" fill="#8CACD3" />
                            <g class="head" transform="translate(0, -2)">
                                <circle cx="78" cy="35" r="18" fill="#8CACD3" />
                                <path d="M68,25 L65,8 L78,20 Z" fill="#8CACD3" />
                                <path d="M88,25 L91,8 L78,20 Z" fill="#8CACD3" />
                                <circle cx="72" cy="32" r="2" fill="#333" />
                                <circle cx="84" cy="32" r="2" fill="#333" />
                                <path d="M76,38 L78,40 L80,38" stroke="#333" stroke-width="1.5" fill="none" />
                                <path d="M62,35 H70 M62,38 H70" stroke="#fff" stroke-width="1" opacity="0.7" />
                                <path d="M86,35 H94 M86,38 H94" stroke="#fff" stroke-width="1" opacity="0.7" />
                            </g>
                        </g>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- çµ‚æ¥µè³‡æ–™åº« (å„ 25 é …ä»¥ä¸Š) ---
        const database = {
            dog: {
                breeds: [
                    { name: "ç±³å…‹æ–¯ (Mix)", weight: 15 },
                    { name: "æŸ´çŠ¬ (Shiba Inu)", weight: 10 },
                    { name: "æŸ¯åŸº (Corgi)", weight: 12 },
                    { name: "è²´è³“çŠ¬ (Poodle)", weight: 5 },
                    { name: "é»ƒé‡‘çµçŠ¬ (Golden Retriever)", weight: 30 },
                    { name: "æ‹‰ä¸æ‹‰å¤š (Labrador)", weight: 32 },
                    { name: "æ³•åœ‹é¬¥ç‰›çŠ¬ (Frenchie)", weight: 11 },
                    { name: "è‡˜è…¸çŠ¬ (Dachshund)", weight: 6 },
                    { name: "å‰å¨ƒå¨ƒ (Chihuahua)", weight: 2.5 },
                    { name: "é¦¬çˆ¾æ¿Ÿæ–¯ (Maltese)", weight: 3 },
                    { name: "åšç¾ (Pomeranian)", weight: 2.5 },
                    { name: "é›ªç´ç‘ (Schnauzer)", weight: 8 },
                    { name: "é‚Šå¢ƒç‰§ç¾ŠçŠ¬ (Border Collie)", weight: 18 },
                    { name: "å“ˆå£«å¥‡ (Husky)", weight: 23 },
                    { name: "æ¯”æ ¼çŠ¬ (Beagle)", weight: 10 },
                    { name: "å·´å“¥çŠ¬ (Pug)", weight: 8 },
                    { name: "ç´„å…‹å¤ (Yorkie)", weight: 3 },
                    { name: "è¥¿æ–½çŠ¬ (Shih Tzu)", weight: 6 },
                    { name: "è‹±åœ‹é¬¥ç‰›çŠ¬ (Bulldog)", weight: 23 },
                    { name: "æ‹³å¸«çŠ¬ (Boxer)", weight: 28 },
                    { name: "ç¾…å¨ç´ (Rottweiler)", weight: 40 },
                    { name: "è–©æ‘©è€¶ (Samoyed)", weight: 25 },
                    { name: "é¬†ç…çŠ¬ (Chow Chow)", weight: 25 },
                    { name: "æ¯”ç†ŠçŠ¬ (Bichon Frise)", weight: 5.5 },
                    { name: "ç‰›é ­æ¢— (Bull Terrier)", weight: 25 },
                    { name: "ç§‹ç”°çŠ¬ (Akita)", weight: 35 },
                    { name: "å‚‘å…‹ç¾…ç´ æ¢— (Jack Russell)", weight: 7 }
                ],
                foods: [
                    { name: "Royal Canin çš‡å®¶ - å°å‹æˆçŠ¬", kcal: 3960 },
                    { name: "Royal Canin çš‡å®¶ - å¤§å‹æˆçŠ¬", kcal: 3700 },
                    { name: "Orijen æ¸´æœ› - åŸå‘³é®®é›", kcal: 3960 },
                    { name: "Orijen æ¸´æœ› - å…­ç¨®é­š", kcal: 3860 },
                    { name: "Hill's å¸Œçˆ¾æ€ - æˆçŠ¬é›è‚‰", kcal: 3650 },
                    { name: "Real Power ç‘å¨ - 1è™Ÿè‰åŸç¾Š", kcal: 4050 },
                    { name: "Real Power ç‘å¨ - 2è™Ÿæ£®æ—ç‡‰é›", kcal: 3950 },
                    { name: "ZiwiPeak å·”å³° - ç¾Šè‚‰è‚‰ä¹¾", kcal: 5600 },
                    { name: "Farmina æ³•ç±³ç´ - å—ç“œç¾Šè‚‰", kcal: 3960 },
                    { name: "Acana æ„›è‚¯æ‹¿ - å–®ä¸€è›‹ç™½é´¨è‚‰", kcal: 3393 },
                    { name: "Acana æ„›è‚¯æ‹¿ - å¤ªå¹³æ´‹é­š", kcal: 3530 },
                    { name: "Taste of the Wild æµ·é™¸ - ç‡»çƒ¤é®­é­š", kcal: 3600 },
                    { name: "Taste of the Wild æµ·é™¸ - çƒ¤é¹¿è‚‰", kcal: 3719 },
                    { name: "Wellness å¯µç‰©å¥åº· - COREç„¡ç©€", kcal: 3660 },
                    { name: "Go! - å››ç¨®è‚‰", kcal: 4298 },
                    { name: "Now Fresh - é®®è‚‰ç„¡ç©€", kcal: 3700 },
                    { name: "Instinct åŸé» - é›è‚‰ç„¡ç©€", kcal: 4250 },
                    { name: "Blackwood æŸèŠå¯Œ - é›è‚‰", kcal: 3800 },
                    { name: "Nutram ç´é “ - T23 ç«é›", kcal: 3725 },
                    { name: "Monge ç‘ªæ©å‰ - çœŸé‡ä½ç©€", kcal: 4000 },
                    { name: "Merrick å¥‡è¹Ÿ - ç„¡ç©€é›è‚‰", kcal: 3600 },
                    { name: "Canidae 365 - å‡è¡¡é…æ–¹", kcal: 3600 },
                    { name: "Solid Gold ç´ åŠ›é«˜ - ç¾Šè‚‰", kcal: 3750 },
                    { name: "Applaws æ„›æ™®å£« - å…¨é½¡çŠ¬", kcal: 3700 },
                    { name: "ANF - è—å¸¶é´¨è‚‰", kcal: 3500 },
                    { name: "1st Choice ç‘ªä¸ - ç¾Šè‚‰", kcal: 3550 },
                    { name: "Pro Plan å† èƒ½ - é›è‚‰", kcal: 3800 }
                ],
                conditions: [
                    { val: 1.6, text: "æˆçŠ¬ (å·²çµç´®)" },
                    { val: 1.8, text: "æˆçŠ¬ (æœªçµç´®)" },
                    { val: 3.0, text: "å¹¼çŠ¬ (4å€‹æœˆä»¥ä¸‹)" },
                    { val: 2.0, text: "å¹¼çŠ¬ (æˆé•·ä¸­)" },
                    { val: 1.0, text: "æ¸›é‡ä¸­ / è€çŠ¬" },
                    { val: 2.0, text: "é«˜æ´»å‹•é‡ (å·¥ä½œçŠ¬)" }
                ],
                advice: [
                    "é›¶é£Ÿç†±é‡è«‹æ§åˆ¶åœ¨æ¯æ—¥ç¸½ç†±é‡çš„ 10% ä»¥å…§ï¼Œé¿å…è‚¥èƒ–å–”ï¼",
                    "ç‹—ç‹—ä¸èƒ½åƒè‘¡è„ã€å·§å…‹åŠ›ã€æ´‹è”¥ã€å¤å¨å¤·è±†ï¼Œè«‹å‹™å¿…å°å¿ƒã€‚",
                    "å¤å¤©æ•£æ­¥è«‹é¿é–‹æ­£ä¸­åˆï¼Œåœ°æ¿æº«åº¦å¤ªé«˜æœƒç‡™å‚·è…³æŒã€‚",
                    "æ›é£¼æ–™è¦æ¡ã€Œä¸ƒæ—¥æ›é£Ÿæ³•ã€ï¼Œæ¯å¤©å¢åŠ ä¸€é»æ–°é£¼æ–™ã€‚",
                    "å®šæœŸå¹«ç‹—ç‹—å‰ªæŒ‡ç”²ï¼ŒæŒ‡ç”²å¤ªé•·æœƒå½±éŸ¿èµ°è·¯å§¿å‹¢èˆ‡é—œç¯€å¥åº·ã€‚",
                    "ç‹—ç‹—çš„ç‰™é½’å¥åº·å¾ˆé‡è¦ï¼Œè¨˜å¾—è¦æ¯å¤©åˆ·ç‰™æˆ–ä½¿ç”¨æ½”ç‰™éª¨ã€‚",
                    "æ¯å¹´å®šæœŸæ–½æ‰“ç–«è‹—èˆ‡å¿ƒçµ²èŸ²é é˜²è—¥ï¼Œé é˜²å‹æ–¼æ²»ç™‚ï¼"
                ]
            },
            cat: {
                breeds: [
                    { name: "ç±³å…‹æ–¯ (Mix)", weight: 4.5 },
                    { name: "ç¾åœ‹çŸ­æ¯›è²“ (American)", weight: 5 },
                    { name: "è‹±åœ‹çŸ­æ¯›è²“ (British)", weight: 5.5 },
                    { name: "å¸ƒå¶è²“ (Ragdoll)", weight: 6.5 },
                    { name: "æ›¼èµ¤è‚¯ (Munchkin)", weight: 3.5 },
                    { name: "æ©˜è²“ (Orange Tabby)", weight: 5.5 },
                    { name: "è³“å£«è²“ (Tuxedo)", weight: 4.5 },
                    { name: "æš¹ç¾…è²“ (Siamese)", weight: 3.5 },
                    { name: "æ³¢æ–¯è²“ (Persian)", weight: 4 },
                    { name: "ç·¬å› è²“ (Maine Coon)", weight: 7.5 },
                    { name: "ç„¡æ¯›è²“ (Sphynx)", weight: 4 },
                    { name: "ä¿„ç¾…æ–¯è—è²“ (Russian Blue)", weight: 4 },
                    { name: "è˜‡æ ¼è˜­æŠ˜è€³è²“ (Scottish Fold)", weight: 4 },
                    { name: "å­ŸåŠ æ‹‰è²“ (Bengal)", weight: 5.5 },
                    { name: "é˜¿æ¯”è¥¿å°¼äº (Abyssinian)", weight: 3.5 },
                    { name: "æŒªå¨æ£®æ—è²“ (Norwegian)", weight: 6.5 },
                    { name: "ä¼¯æ›¼è²“ (Birman)", weight: 4.5 },
                    { name: "æ±æ–¹çŸ­æ¯›è²“ (Oriental)", weight: 3.5 },
                    { name: "å¾·æ–‡æ²æ¯›è²“ (Devon Rex)", weight: 3 },
                    { name: "ç•°åœ‹çŸ­æ¯›è²“ (Exotic)", weight: 4.5 },
                    { name: "å–œé¦¬æ‹‰é›…è²“ (Himalayan)", weight: 4 },
                    { name: "å³‡é‡Œè²“ (Balinese)", weight: 3.5 },
                    { name: "æ›¼å³¶è²“ (Manx)", weight: 4 },
                    { name: "å­Ÿè²·è²“ (Bombay)", weight: 4 },
                    { name: "ä¸‰èŠ±è²“ (Calico)", weight: 4 },
                    { name: "ç³ç‘è²“ (Tortoiseshell)", weight: 4 }
                ],
                foods: [
                    { name: "Royal Canin çš‡å®¶ - å®¤å…§è²“", kcal: 3750 },
                    { name: "Royal Canin çš‡å®¶ - æ³Œå°¿é“é…æ–¹", kcal: 3870 },
                    { name: "Orijen æ¸´æœ› - é®®é›æ„›è²“", kcal: 4060 },
                    { name: "Orijen æ¸´æœ› - å…­ç¨®é­š", kcal: 4060 },
                    { name: "Real Power ç‘å¨ - 3è™Ÿæµ·é­š", kcal: 4150 },
                    { name: "Wellness å¯µç‰©å¥åº· - COREç„¡ç©€", kcal: 3977 },
                    { name: "Monster æ€ªç¸éƒ¨è½ - é®®è‚‰ç³§", kcal: 4100 },
                    { name: "Mobby è«æ¯” - ç„¡ç©€é¹¿è‚‰", kcal: 3650 },
                    { name: "Acana æ„›è‚¯æ‹¿ - è±ç››æ¼ç²", kcal: 4080 },
                    { name: "Acana æ„›è‚¯æ‹¿ - è¾²å ´é¥—å®´", kcal: 4060 },
                    { name: "Hill's å¸Œçˆ¾æ€ - æˆè²“", kcal: 4000 },
                    { name: "Farmina æ³•ç±³ç´ - è‘‰é…¸é´¨è‚‰", kcal: 4060 },
                    { name: "ZiwiPeak å·”å³° - ç¾Šè‚‰è‚‰ä¹¾", kcal: 5600 },
                    { name: "Go! - å››ç¨®è‚‰", kcal: 4298 },
                    { name: "Now Fresh - é®®è‚‰ç„¡ç©€", kcal: 3800 },
                    { name: "Instinct åŸé» - é›è‚‰ç„¡ç©€", kcal: 4150 },
                    { name: "Nutram ç´é “ - T22 ç„¡ç©€ç«é›", kcal: 3820 },
                    { name: "Blackwood æŸèŠå¯Œ - ç‰¹èª¿é›è‚‰", kcal: 3800 },
                    { name: "Taste of the Wild æµ·é™¸ - é¹¿è‚‰é®­é­š", kcal: 4260 },
                    { name: "Applaws æ„›æ™®å£« - å…¨é½¡è²“", kcal: 3900 },
                    { name: "Feline Natural K9 - é›è‚‰å‡ä¹¾", kcal: 4986 },
                    { name: "Solid Gold ç´ åŠ›é«˜ - é›è‚‰", kcal: 3750 },
                    { name: "Canidae 365 - å‡è¡¡é…æ–¹", kcal: 4100 },
                    { name: "Halo å˜¿å›‰ - ç‡‰é£Ÿé›è‚‰", kcal: 3760 },
                    { name: "Leonardo é‡Œå¥§ç´å¤š - é´¨è‚‰", kcal: 3900 },
                    { name: "Pro Plan å† èƒ½ - é®­é­š", kcal: 4000 }
                ],
                conditions: [
                    { val: 1.2, text: "æˆè²“ (å®¤å…§/çµç´®)" },
                    { val: 1.4, text: "æˆè²“ (å¥½å‹•/æœªçµç´®)" },
                    { val: 2.5, text: "å¹¼è²“ (æˆé•·ä¸­)" },
                    { val: 0.8, text: "æ¸›é‡ä¸­ (èƒ–èƒ–è²“)" },
                    { val: 1.0, text: "è€è²“ (æ´»å‹•åŠ›ä½)" },
                    { val: 1.6, text: "æ‡·å­• / å“ºä¹³æœŸ" }
                ],
                advice: [
                    "è²“å’ªä¸æ„›å–æ°´å—ï¼Ÿè©¦è©¦çœ‹æµå‹•å¼é£²æ°´æ©Ÿï¼Œæˆ–åœ¨ç½é ­è£¡åŠ é»æ°´ã€‚",
                    "è²“ç ‚ç›†çš„æ•¸é‡å»ºè­°æ˜¯ã€Œè²“å£æ•¸ + 1ã€ï¼Œæ¸›å°‘äº‚å°¿å°¿çš„æ©Ÿç‡ã€‚",
                    "ç™¾åˆèŠ±å°è²“å’ªæœ‰åŠ‡æ¯’ï¼Œå®¶è£¡è«‹çµ•å°é¿å…ç¨®æ¤ã€‚",
                    "è²“å’ªå¿ç—›èƒ½åŠ›å¾ˆå¼·ï¼Œé£Ÿæ…¾ä¸‹é™å¾€å¾€æ˜¯ç”Ÿç—…çš„ç¬¬ä¸€å€‹è­¦è¨Šã€‚",
                    "ä¹¾é£¼æ–™é–‹å°å¾Œå®¹æ˜“æ°§åŒ–å—æ½®ï¼Œå»ºè­°ä¸€å€‹æœˆå…§åƒå®Œã€‚",
                    "è²“å’ªæ˜¯è‚‰é£Ÿæ€§å‹•ç‰©ï¼Œè«‹ç›¡é‡é¿å…ç¢³æ°´åŒ–åˆç‰©éé«˜çš„é›¶é£Ÿã€‚",
                    "å¦‚æœè²“å’ªä¸€ç›´é€²å‡ºè²“ç ‚ç›†å»å°¿ä¸å‡ºä¾†ï¼Œæ˜¯ç·Šæ€¥æƒ…æ³è«‹ç«‹åˆ»å°±é†«ï¼"
                ]
            }
        };

        let currentPet = 'dog';

        function toggleMode() {
            currentPet = currentPet === 'dog' ? 'cat' : 'dog';
            const body = document.body;
            const btnDog = document.getElementById('btn-dog');
            const btnCat = document.getElementById('btn-cat');
            const svgDog = document.getElementById('dog-svg');
            const svgCat = document.getElementById('cat-svg');

            if(currentPet === 'cat') {
                body.classList.add('cat-mode');
                btnDog.classList.remove('active');
                btnCat.classList.add('active');
                svgDog.classList.remove('active');
                svgCat.classList.add('active');
            } else {
                body.classList.remove('cat-mode');
                btnCat.classList.remove('active');
                btnDog.classList.add('active');
                svgCat.classList.remove('active');
                svgDog.classList.add('active');
            }
            initUI();
            document.getElementById('result-area').style.display = 'none';
        }

        function initUI() {
            const d = database[currentPet];
            
            // Breed
            const breedSel = document.getElementById('breedSelect');
            breedSel.innerHTML = '<option value="">-- è«‹é¸æ“‡å“ç¨® --</option>';
            d.breeds.forEach(b => {
                const opt = document.createElement('option');
                opt.value = b.weight;
                opt.innerText = b.name;
                breedSel.appendChild(opt);
            });

            // Condition
            const condSel = document.getElementById('condition');
            condSel.innerHTML = '';
            d.conditions.forEach(c => {
                const opt = document.createElement('option');
                opt.value = c.val;
                opt.innerText = c.text;
                condSel.appendChild(opt);
            });

            // Food
            const foodSel = document.getElementById('foodBrand');
            foodSel.innerHTML = '<option value="0">-- å¿«é€Ÿé¸æ“‡ (è‡ªå‹•å¸¶å…¥ç†±é‡) --</option>';
            d.foods.forEach(f => {
                const opt = document.createElement('option');
                opt.value = f.kcal;
                opt.innerText = f.name;
                foodSel.appendChild(opt);
            });
        }

        function updateBreed() {
            const w = document.getElementById('breedSelect').value;
            if(w) document.getElementById('weight').value = w;
        }

        function fillKcal() {
            const val = document.getElementById('foodBrand').value;
            if(val != 0) document.getElementById('calories').value = val;
        }

        function calculate() {
            const w = parseFloat(document.getElementById('weight').value);
            const f = parseFloat(document.getElementById('condition').value);
            const k = parseFloat(document.getElementById('calories').value);

            if(!w || !k) { alert("è«‹å¡«å¯«å®Œæ•´è³‡è¨Šå–”ï¼ğŸ¾"); return; }

            // é£Ÿé‡è¨ˆç®—
            const rer = 70 * Math.pow(w, 0.75);
            const der = rer * f;
            const grams = (der / k) * 1000;

            // æ°´é‡è¨ˆç®— (ç´„ 50-60ml/kg)
            const water = Math.round(w * 60);

            // é›¶é£Ÿé¡åº¦ (DER çš„ 10%)
            const treat = Math.round(der * 0.1);

            // é¡¯ç¤º
            document.getElementById('result-area').style.display = 'block';
            
            // å‹•ç•«æ•¸å€¼
            animateValue('totalAmount', Math.round(grams));
            document.getElementById('meal2').innerText = Math.round(grams/2) + " g";
            document.getElementById('meal3').innerText = Math.round(grams/3) + " g";
            
            // æ–°å¢è³‡è¨Š
            document.getElementById('waterNeed').innerText = `ç´„ ${water} ml`;
            document.getElementById('treatLimit').innerText = `ç´„ ${treat} kcal`;

            // å»ºè­°
            const arr = database[currentPet].advice;
            document.getElementById('adviceText').innerText = arr[Math.floor(Math.random()*arr.length)];

            setTimeout(() => {
                document.getElementById('result-area').scrollIntoView({behavior:'smooth'});
            }, 100);
        }

        function animateValue(id, end) {
            const obj = document.getElementById(id);
            let start = 0;
            const duration = 800;
            const startTime = performance.now();

            function step(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                obj.innerText = Math.floor(progress * end);
                if (progress < 1) requestAnimationFrame(step);
            }
            requestAnimationFrame(step);
        }

        function copyResult() {
            const total = document.getElementById('totalAmount').innerText;
            const water = document.getElementById('waterNeed').innerText;
            const pet = currentPet === 'dog' ? 'ğŸ¶ ç‹—ç‹—' : 'ğŸ± è²“å’ª';
            const txt = `ğŸ¾ [æ¯›å­©é£²é£Ÿæ‰‹æœ­] è¨ˆç®—çµæœ\n- å°è±¡: ${pet}\n- æ¯æ—¥é£Ÿé‡: ${total} g\n- å»ºè­°å–æ°´: ${water}`;
            
            navigator.clipboard.writeText(txt).then(() => {
                const btn = document.querySelector('.copy-btn');
                const original = btn.innerText;
                btn.innerText = "âœ… å·²è¤‡è£½åˆ°å‰ªè²¼ç°¿ï¼";
                setTimeout(() => btn.innerText = original, 2000);
            });
        }

        initUI();
    </script>
</body>
</html>
